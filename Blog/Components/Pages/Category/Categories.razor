@page "/Categories"
@inject PostService _postService
@inject NavigationManager NavigationManager
@rendermode InteractiveServer
@inject ILogger<Categories> _logger

<PageTitle>Categories</PageTitle>


 <section class="relative h-[30vh] bg-cover bg-center rounded-2xl">
        <div class="rounded-2xl bg-[#F6F6F7] absolute inset-0 p-2  flex flex-col gap-4 items-center justify-center">
            <div class="flex items-center gap-2">
                <p class="text-2xl font-bold ">Categories</p>
            </div>
           
        </div>
    </section>

@if(categories is null)
{
    <MudProgressCircular Color="Color.Default" Indeterminate="true" />
}
else if(categories.Count == 0)
{
    <p>No categories to display</p>
}
else
{
    <div class="grid gap-8 grid-cols-2 md:grid-cols-3 lg:grid-cols-4 2xl:grid-cols-5 my-10 justify-center">

        @foreach (var category in categories)
        {

            <div class="p-4 cursor-pointer flex flex-col justify-center items-center bg-blue-800 shadow-lg rounded-lg gap-3 w-full md:w-[260px] h-[120px] max-h-[500px]" @onclick="() => NavigateToCategory(category.Id)">
                
                <h1 class="text-xl text-white text-center font-bold">@category.Name</h1>
               
            </div>

        }
    </div>
}

@code {
    private List<Category> categories;

    protected override async Task OnInitializedAsync()
    {
        try {

            categories = await _postService.GetAllCategoriesAsync();
        }
        catch(Exception ex)
        {
            _logger.LogError($"Error fetching categories : {ex}");
        }

    }
    private void NavigateToCategory(int Id)
    {
        NavigationManager.NavigateTo($"/category/{Id}");
    }
}
